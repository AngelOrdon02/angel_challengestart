# RESULTADOS DE PRUEBAS CURL - API MOCKS REST (LINUX/BASH)
# ============================================
# Angel Geovanny Ord√≥n Colchaj
# Challenge Start | API para Mocks de Servicios REST
# 
# Fecha de ejecuci√≥n: July 10, 2025
# Servidor: http://localhost:3000
# Sintaxis: Linux/Bash (usando \ para continuaci√≥n de l√≠nea)
#
# FORMATO:
# COMANDO: [comando curl ejecutado]
# RESULTADO: [salida de la terminal]
# STATUS: [EXITOSO/ERROR]
# 
# ============================================

# =====================================
# VERIFICACI√ìN INICIAL DEL SERVIDOR
# =====================================

COMANDO: curl -X GET http://localhost:3000/api/configure-mock
RESULTADO: {"mocks":[]}
STATUS: EXITOSO
DESCRIPCI√ìN: Servidor corriendo correctamente, sin mocks configurados

# =====================================
# 1. CONFIGURAR MOCKS
# =====================================

# Mock b√°sico GET
COMANDO: curl -X POST http://localhost:3000/api/configure-mock \
  -H "Content-Type: application/json" \
  -d '{"path":"/api/v1/productos","method":"GET","statusCode":200,"response":{"productos":[{"id":1,"nombre":"Producto 1"},{"id":2,"nombre":"Producto 2"}]},"contentType":"application/json"}'
RESULTADO: {"message":"Mock configurado correctamente","mock":{"id":"0bad16c6-4ecd-4252-b98d-e9a1c3ad2de7","numericId":1,"path":"/api/v1/productos","method":"GET","statusCode":200,"response":{"productos":[{"id":1,"nombre":"Producto 1"},{"id":2,"nombre":"Producto 2"}]},"contentType":"application/json"}}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock b√°sico configurado correctamente con ID num√©rico 1

# Mock con headers espec√≠ficos
COMANDO: curl -X POST http://localhost:3000/api/configure-mock \
  -H "Content-Type: application/json" \
  -d '{"path":"/api/v1/usuarios","method":"GET","headers":{"Authorization":"Bearer token123"},"statusCode":200,"response":{"usuarios":[{"id":1,"nombre":"Juan"}]}}'
RESULTADO: {"message":"Mock configurado correctamente","mock":{"id":"880524b7-836c-49e3-88ab-7fbd135b1b68","numericId":2,"path":"/api/v1/usuarios","method":"GET","headers":{"Authorization":"Bearer token123"},"statusCode":200,"response":{"usuarios":[{"id":1,"nombre":"Juan"}]},"contentType":"application/json"}}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock con headers configurado correctamente con ID num√©rico 2

# Mock con par√°metros de URL
COMANDO: curl -X POST http://localhost:3000/api/configure-mock \
  -H "Content-Type: application/json" \
  -d '{"path":"/api/v1/buscar","method":"GET","params":{"categoria":"electronicos"},"statusCode":200,"response":{"resultados":[{"id":1,"nombre":"Laptop"},{"id":2,"nombre":"Mouse"}]}}'
RESULTADO: {"message":"Mock configurado correctamente","mock":{"id":"b2ed7b05-e0c2-41f0-ad4c-4788b2d0e61b","numericId":3,"path":"/api/v1/buscar","method":"GET","params":{"categoria":"electronicos"},"statusCode":200,"response":{"resultados":[{"id":1,"nombre":"Laptop"},{"id":2,"nombre":"Mouse"}]},"contentType":"application/json"}}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock con par√°metros URL configurado correctamente con ID num√©rico 3

# Mock POST con body
COMANDO: curl -X POST http://localhost:3000/api/configure-mock \
  -H "Content-Type: application/json" \
  -d '{"path":"/api/v1/crear-usuario","method":"POST","body":{"nombre":"Juan","email":"juan@email.com"},"statusCode":201,"response":{"id":123,"mensaje":"Usuario creado exitosamente"}}'
RESULTADO: {"message":"Mock configurado correctamente","mock":{"id":"4122dd18-3afc-46e3-a5f7-6dba97a1c783","numericId":4,"path":"/api/v1/crear-usuario","method":"POST","body":{"nombre":"Juan","email":"juan@email.com"},"statusCode":201,"response":{"id":123,"mensaje":"Usuario creado exitosamente"},"contentType":"application/json"}}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock POST con body configurado correctamente con ID num√©rico 4

# =====================================
# 2. LISTAR MOCKS CONFIGURADOS
# =====================================

# Ver todos los mocks configurados
COMANDO: curl -X GET http://localhost:3000/api/configure-mock
RESULTADO: {"mocks":[{"id":"0bad16c6-4ecd-4252-b98d-e9a1c3ad2de7","numericId":1,"path":"/api/v1/productos","method":"GET","statusCode":200,"response":{"productos":[{"id":1,"nombre":"Producto 1"},{"id":2,"nombre":"Producto 2"}]},"contentType":"application/json"},{"id":"880524b7-836c-49e3-88ab-7fbd135b1b68","numericId":2,"path":"/api/v1/usuarios","method":"GET","headers":{"Authorization":"Bearer token123"},"statusCode":200,"response":{"usuarios":[{"id":1,"nombre":"Juan"}]},"contentType":"application/json"},{"id":"b2ed7b05-e0c2-41f0-ad4c-4788b2d0e61b","numericId":3,"path":"/api/v1/buscar","method":"GET","params":{"categoria":"electronicos"},"statusCode":200,"response":{"resultados":[{"id":1,"nombre":"Laptop"},{"id":2,"nombre":"Mouse"}]},"contentType":"application/json"},{"id":"4122dd18-3afc-46e3-a5f7-6dba97a1c783","numericId":4,"path":"/api/v1/crear-usuario","method":"POST","body":{"nombre":"Juan","email":"juan@email.com"},"statusCode":201,"response":{"id":123,"mensaje":"Usuario creado exitosamente"},"contentType":"application/json"}]}
STATUS: EXITOSO
DESCRIPCI√ìN: Se listan 4 mocks configurados correctamente

# =====================================
# 4. PROBAR MOCKS CONFIGURADOS
# =====================================

# Probar mock b√°sico de productos
COMANDO: curl -X GET http://localhost:3000/api/v1/productos
RESULTADO: {"productos":[{"id":1,"nombre":"Producto 1"},{"id":2,"nombre":"Producto 2"}]}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock GET b√°sico funciona correctamente

# Probar mock con headers requeridos
COMANDO: curl -X GET http://localhost:3000/api/v1/usuarios \
  -H "Authorization: Bearer token123"
RESULTADO: {"usuarios":[{"id":1,"nombre":"Juan"}]}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock con headers funciona correctamente

# Probar mock con par√°metros de URL
COMANDO: curl -X GET "http://localhost:3000/api/v1/buscar?categoria=electronicos"
RESULTADO: {"resultados":[{"id":1,"nombre":"Laptop"},{"id":2,"nombre":"Mouse"}]}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock con par√°metros URL funciona correctamente

# Probar mock POST con body
COMANDO: curl -X POST http://localhost:3000/api/v1/crear-usuario \
  -H "Content-Type: application/json" \
  -d '{"nombre":"Juan","email":"juan@email.com"}'
RESULTADO: {"id":123,"mensaje":"Usuario creado exitosamente"}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock POST con body funciona correctamente

# =====================================
# 5. ELIMINAR MOCKS
# =====================================

# Eliminar por ID num√©rico
COMANDO: curl -X DELETE http://localhost:3000/api/configure-mock/1
RESULTADO: {"message":"Mock eliminado correctamente","deletedMock":{"id":"0bad16c6-4ecd-4252-b98d-e9a1c3ad2de7","numericId":1,"path":"/api/v1/productos","method":"GET"}}
STATUS: EXITOSO
DESCRIPCI√ìN: Eliminaci√≥n por ID num√©rico funciona correctamente

# Eliminar por path (usando doble barra //)
COMANDO: curl -X DELETE "http://localhost:3000/api/configure-mock//api/v1/usuarios"
RESULTADO: {"message":"Mock eliminado correctamente","deletedMock":{"id":"880524b7-836c-49e3-88ab-7fbd135b1b68","numericId":2,"path":"/api/v1/usuarios","method":"GET"}}
STATUS: EXITOSO
DESCRIPCI√ìN: Eliminaci√≥n por path funciona correctamente con sintaxis //

# Eliminar espec√≠fico por path y m√©todo
COMANDO: curl -X DELETE http://localhost:3000/api/configure-mock \
  -H "Content-Type: application/json" \
  -d '{"path":"/api/v1/buscar","method":"GET"}'
RESULTADO: {"message":"Mock eliminado correctamente","deletedMock":{"id":"b2ed7b05-e0c2-41f0-ad4c-4788b2d0e61b","numericId":3,"path":"/api/v1/buscar","method":"GET"}}
STATUS: EXITOSO
DESCRIPCI√ìN: Eliminaci√≥n por path y m√©todo funciona correctamente

# =====================================
# 6. CASOS DE PRUEBA DE VALIDACI√ìN
# =====================================

# Error: Path sin barra inicial
COMANDO: curl -X POST http://localhost:3000/api/configure-mock \
  -H "Content-Type: application/json" \
  -d '{"path":"api/productos","method":"GET","statusCode":200,"response":{}}'
RESULTADO: {"error":"Datos de entrada inv√°lidos","details":[{"field":"path","message":"El path debe comenzar con \"/\""}]}
STATUS: ERROR (ESPERADO)
DESCRIPCI√ìN: Validaci√≥n correcta de path sin barra inicial

# Error: M√©todo HTTP inv√°lido
COMANDO: curl -X POST http://localhost:3000/api/configure-mock \
  -H "Content-Type: application/json" \
  -d '{"path":"/api/productos","method":"INVALID","statusCode":200,"response":{}}'
RESULTADO: {"error":"Datos de entrada inv√°lidos","details":[{"field":"method","message":"El m√©todo debe ser uno de: GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS"}]}
STATUS: ERROR (ESPERADO)
DESCRIPCI√ìN: Validaci√≥n correcta de m√©todo HTTP inv√°lido

# Error: ID inv√°lido para eliminaci√≥n
COMANDO: curl -X DELETE http://localhost:3000/api/configure-mock/invalid-id
RESULTADO: {"error":"Identificador inv√°lido","message":"El identificador debe ser un UUID v√°lido, un ID num√©rico, o un path v√°lido (ej: /api/productos)","details":["El identificador debe ser un UUID v√°lido, un ID num√©rico, o un path v√°lido"]}
STATUS: ERROR (ESPERADO)
DESCRIPCI√ìN: Validaci√≥n correcta de identificador inv√°lido

# Error: Eliminar mock inexistente
COMANDO: curl -X DELETE http://localhost:3000/api/configure-mock/999
RESULTADO: {"error":"Mock no encontrado","message":"No se encontr√≥ un mock con el identificador: 999","suggestion":"Usa GET /api/configure-mock para ver todos los mocks disponibles"}
STATUS: ERROR (ESPERADO)
DESCRIPCI√ìN: Manejo correcto de mock inexistente

# =====================================
# 7. CASOS DE PRUEBA COMPLEJOS
# =====================================

# Mock con headers complejos
COMANDO: curl -X POST http://localhost:3000/api/configure-mock \
  -H "Content-Type: application/json" \
  -d '{"path":"/api/v1/secure","method":"GET","headers":{"Authorization":"Bearer abc123","X-API-Key":"key123"},"statusCode":200,"response":{"data":"secure data"}}'
RESULTADO: {"message":"Mock configurado correctamente","mock":{"id":"118e2672-b911-4218-bae4-0506c29ce210","numericId":5,"path":"/api/v1/secure","method":"GET","headers":{"Authorization":"Bearer abc123","X-API-Key":"key123"},"statusCode":200,"response":{"data":"secure data"},"contentType":"application/json"}}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock con m√∫ltiples headers configurado correctamente

# Probar mock con headers complejos
COMANDO: curl -X GET http://localhost:3000/api/v1/secure \
  -H "Authorization: Bearer abc123" \
  -H "X-API-Key: key123"
RESULTADO: {"data":"secure data"}
STATUS: EXITOSO
DESCRIPCI√ìN: Mock con m√∫ltiples headers funciona correctamente

# Probar ruta que no tiene mock configurado
COMANDO: curl -X GET http://localhost:3000/api/v1/no-existe
RESULTADO: {"error":"Ruta no encontrada","message":"No se encontr√≥ un mock configurado para GET /api/v1/no-existe","suggestion":"Verifica que hayas configurado un mock para esta ruta usando POST /api/configure-mock"}
STATUS: ERROR (ESPERADO)
DESCRIPCI√ìN: Manejo correcto de rutas no configuradas

# =====================================
# 8. ESTADO FINAL DE MOCKS
# =====================================

# Ver estado final de mocks configurados
COMANDO: curl -X GET http://localhost:3000/api/configure-mock
RESULTADO: {"mocks":[{"id":"4122dd18-3afc-46e3-a5f7-6dba97a1c783","numericId":4,"path":"/api/v1/crear-usuario","method":"POST","body":{"nombre":"Juan","email":"juan@email.com"},"statusCode":201,"response":{"id":123,"mensaje":"Usuario creado exitosamente"},"contentType":"application/json"},{"id":"118e2672-b911-4218-bae4-0506c29ce210","numericId":5,"path":"/api/v1/secure","method":"GET","headers":{"Authorization":"Bearer abc123","X-API-Key":"key123"},"statusCode":200,"response":{"data":"secure data"},"contentType":"application/json"}]}
STATUS: EXITOSO
DESCRIPCI√ìN: Quedan 2 mocks configurados: POST /api/v1/crear-usuario (ID 4) y GET /api/v1/secure (ID 5)

# =====================================
# RESUMEN DE PRUEBAS EJECUTADAS
# =====================================
#
# TOTAL DE PRUEBAS: 15
# EXITOSAS: 11
# ERRORES ESPERADOS: 4
# 
# FUNCIONALIDADES PROBADAS:
# ‚úÖ Configuraci√≥n de mocks (GET, POST, con headers, par√°metros, body)
# ‚úÖ Listado de mocks configurados
# ‚úÖ Ejecuci√≥n de mocks configurados
# ‚úÖ Eliminaci√≥n por ID num√©rico
# ‚úÖ Eliminaci√≥n por path (sintaxis //)
# ‚úÖ Eliminaci√≥n por path y m√©todo
# ‚úÖ Validaci√≥n de datos de entrada
# ‚úÖ Manejo de errores
# ‚úÖ Mocks con m√∫ltiples headers
# ‚úÖ Manejo de rutas no configuradas
#
# DIFERENCIAS CON WINDOWS:
# üîÑ Uso de \ para continuaci√≥n de l√≠nea (en lugar de ^)
# üîÑ Uso de comillas simples ' para JSON (en lugar de escape \")
# üîÑ Sin problemas de escape de caracteres especiales
#
# ESTADO: API COMPLETAMENTE FUNCIONAL EN LINUX/BASH
# =====================================
